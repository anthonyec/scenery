<style>
  canvas {
    outline: 1px solid red;
  }
</style>

<canvas width="500" height="500"></canvas>

<script src="../dist/scenebox.js"></script>

<script>
  const { Scene, SceneObject } = SceneBox;
  const scene = new Scene({
    canvas: document.querySelector('canvas')
  });

  const object = {
    draw: ({ context, x, y, width, height, color }) => {
      console.log('draw rectangle');
      context.fillStyle = color;
      context.fillRect(x, y, width, height);
    }
  };

  const rectangle1 = new SceneObject(object);
  const rectangle2 = new SceneObject(object);
  const rectangle3 = new SceneObject(object);
  const rectangle4 = new SceneObject(object);
  const rectangle5 = new SceneObject(object);
  const rectangle6 = new SceneObject(object);

  scene.add(rectangle1);
  scene.add(rectangle2);
  scene.add(rectangle3);
  scene.add(rectangle4);
  scene.add(rectangle5);
  scene.add(rectangle6);

  rectangle1.update({ x: 20, y: 20, color: 'green' });
  rectangle2.update({ x: 10, y: 10, color: 'blue' });

  let lastDrawTime = 0;
  const fps = 60;

  function draw() {
    if ((Date.now() - lastDrawTime) > 1000 / fps) {
      scene.draw();
      rectangle1.update({ x: Math.random() * 400, y: Math.random() * 400, color: 'green' });
      // rectangle.update({ x: 300, y: 30, color: 'green' });
      // rectangle.update({ x: Math.random() * 300, y: 30, color: 'green' });
      // rectangle2.update({ x: Math.random() * 400, y: Math.random() * 400, color: 'blue' });

      lastDrawTime = Date.now();
    }

    window.requestAnimationFrame(draw);
  }

  // setInterval(() => {
  //   draw();
  // }, 500);

  draw();
  // Basic avgerage time to render: 0.04ms - 0.05ms
</script>
